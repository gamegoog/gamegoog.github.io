var adsManager,adsLoader,adDisplayContainer,intervalTimer,playButton,pauseButton,muteButton,unMuteButton,videoContent;function init(){videoContent=document.getElementById("contentElement"),playButton=document.getElementById("playButton"),pauseButton=document.getElementById("pauseButton"),muteButton=document.getElementById("muteButton"),unMuteButton=document.getElementById("unMuteButton"),playButton.addEventListener("click",resumeAds),pauseButton.addEventListener("click",pauseAds),unMuteButton.addEventListener("click",unMuteAds),muteButton.addEventListener("click",muteAds),setUpIMA()}function setUpIMA(){try{(adDisplayContainer=new google.ima.AdDisplayContainer(document.getElementById("adContainer"),videoContent)).initialize(),(adsLoader=new google.ima.AdsLoader(adDisplayContainer)).addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,onAdsManagerLoaded,!1),adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,onAdError,!1);videoContent.onended=function(){adsLoader.contentComplete(),console.log("contentEndedListener"),clearElements()};var e=new google.ima.AdsRequest;e.adTagUrl="https://search.spotxchange.com/vast/2.0/212962?VPAID=JS&content_page_url=http%3A%2F%2Ftotaljerkface.com%2Fhappy_wheels.tjf&player_width=900&player_height=500&ad_server[type]=DFP&ad_server[tag]=https%3A%2F%2Fpubads.g.doubleclick.net%2Fgampad%2Fads%3Fsz%3D640x480%26iu%3D%2F58336618%2Fpre-rollhtml5%26impl%3Ds%26gdfp_req%3D1%26env%3Dvp%26output%3Dvast%26unviewed_position_start%3D1%26url%3D%3Areferrer_url%3A%26description_url%3D%3Adescription_url%3A%26correlator%3D%3Atimestamp%3A%7Chttps%3A%2F%2Fpubads.g.doubleclick.net%2Fgampad%2Fads%3Fsz%3D640x480%26iu%3D%2F58336618%2Fpre-rollhtml5%26impl%3Ds%26gdfp_req%3D1%26env%3Dvp%26output%3Dvast%26unviewed_position_start%3D1%26url%3D%5Breferrer_url%5D%26description_url%3D%5Bdescription_url%5D%26correlator%3D%5Btimestamp%5D%5D",e.linearAdSlotWidth=900,e.linearAdSlotHeight=500,e.nonLinearAdSlotWidth=900,e.nonLinearAdSlotHeight=150,adsLoader.requestAds(e)}catch(e){console.log("AD BLOCKER DETECTED"),clearElements()}}function resumeAds(){adsManager.resume(),document.getElementById("playButton").style.display="none",document.getElementById("pauseButton").style.display="block"}function pauseAds(){adsManager.pause(),document.getElementById("pauseButton").style.display="none",document.getElementById("playButton").style.display="block"}function muteAds(){adsManager.setVolume(0),console.log("muteAds"),document.getElementById("unMuteButton").style.display="block",document.getElementById("muteButton").style.display="none"}function unMuteAds(){adsManager.setVolume(1),console.log("unmuteAds"),document.getElementById("unMuteButton").style.display="none",document.getElementById("muteButton").style.display="block"}function onAdsManagerLoaded(e){var t=new google.ima.AdsRenderingSettings;t.restoreCustomPlaybackStateOnAdBreakComplete=!0,(adsManager=e.getAdsManager(videoContent,t)).addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,onAdError),adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,onContentPauseRequested),adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,onContentResumeRequested),adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,onAdEvent),adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,onAdEvent),adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,onAdEvent),adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,onAdEvent);try{adsManager.init(900,500,google.ima.ViewMode.NORMAL),adsManager.start()}catch(e){console.log("failed to init adsManager"),clearElements()}}function onAdEvent(e){console.log("adEvent called"),console.log(e.type);var t=e.getAd();switch(e.type){case google.ima.AdEvent.Type.LOADED:t.isLinear()||(console.log("is not Linear!"),videoContent.play());break;case google.ima.AdEvent.Type.STARTED:t.isLinear()&&(console.log("is Linear!"),intervalTimer=setInterval((function(){adsManager.getRemainingTime()}),300));break;case google.ima.AdEvent.Type.COMPLETE:console.log("is Complete!"),t.isLinear()&&(clearInterval(intervalTimer),console.log("is Linear!")),clearElements();break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:console.log("all ads Complete!"),t.isLinear()&&(clearInterval(intervalTimer),console.log("is Linear!")),clearElements()}}function onAdError(e){console.log(e.getError()),clearElements()}function clearElements(){adsLoader&&adsLoader.destroy(),adDisplayContainer&&adDisplayContainer.destroy(),adsManager&&adsManager.destroy(),document.getElementById("content").style.display="none",document.getElementById("adContainer").style.display="none",document.getElementById("playButton").style.display="none",document.getElementById("pauseButton").style.display="none",document.getElementById("unMuteButton").style.display="none",document.getElementById("muteButton").style.display="none"}function onContentPauseRequested(){videoContent.pause()}function onContentResumeRequested(){videoContent.play()}init();